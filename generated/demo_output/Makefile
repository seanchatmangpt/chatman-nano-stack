# Makefile for demo BitActor
# Generated by CNS BitActor TTL Generator

CC = gcc
CFLAGS = -O3 -march=native -Wall -Wextra -std=c11 -pthread
LDFLAGS = -lm -lpthread

PREFIX = demo

all: test benchmark

test: $(PREFIX)_test
	./$(PREFIX)_test

benchmark: $(PREFIX)_benchmark
	./$(PREFIX)_benchmark

$(PREFIX)_test: $(PREFIX)_test.c $(PREFIX)_bitactor.h
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)

$(PREFIX)_benchmark: $(PREFIX)_benchmark.c $(PREFIX)_bitactor.h
	$(CC) $(CFLAGS) -DBENCHMARK_MODE -o $@ $< $(LDFLAGS)

clean:
	rm -f $(PREFIX)_test $(PREFIX)_benchmark

.PHONY: all test benchmark clean
