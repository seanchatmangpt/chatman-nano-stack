{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Artificial Hyper Intelligence Swarm Data Contract",
  "description": "Shared data contract between Python swarm coordinator and Elixir Ash.Reactor",
  "type": "object",
  "properties": {
    "swarm_coordination_metadata": {
      "type": "object",
      "properties": {
        "coordination_id": {"type": "string", "format": "uuid"},
        "execution_timestamp": {"type": "string", "format": "date-time"},
        "swarm_version": {"type": "string"},
        "protocol_version": {"type": "string", "enum": ["1.0"]}
      },
      "required": ["coordination_id", "execution_timestamp"]
    },
    
    "ontology_intelligence": {
      "type": "object",
      "properties": {
        "ontology_name": {"type": "string"},
        "ttl_source": {"type": "string"},
        "classes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "uri": {"type": "string"},
              "type": {"type": "string", "enum": ["Class"]}
            },
            "required": ["name", "uri", "type"]
          }
        },
        "properties": {
          "type": "array", 
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "uri": {"type": "string"},
              "type": {"type": "string", "enum": ["Property"]}
            },
            "required": ["name", "uri", "type"]
          }
        },
        "ttl_constraints": {
          "type": "object",
          "properties": {
            "max_execution_hops": {"type": "integer", "minimum": 1},
            "max_processing_time_ms": {"type": "integer", "minimum": 1},
            "enable_hyper_intelligence": {"type": "boolean"}
          }
        }
      },
      "required": ["ontology_name", "classes", "properties"]
    },
    
    "swarm_nodes": {
      "type": "object",
      "patternProperties": {
        "^[a-z_]+$": {
          "type": "object",
          "properties": {
            "node_id": {"type": "string"},
            "node_type": {"type": "string", "enum": ["python_generator", "elixir_transformer", "c_compiler", "infrastructure"]},
            "capabilities": {
              "type": "array",
              "items": {"type": "string"}
            },
            "status": {"type": "string", "enum": ["idle", "processing", "completed", "failed"]},
            "ttl_budget": {"type": "integer", "minimum": 0},
            "ttl_consumed": {"type": "integer", "minimum": 0},
            "output_data": {"type": "object"},
            "error_log": {"type": ["string", "null"]}
          },
          "required": ["node_id", "node_type", "status", "ttl_budget", "ttl_consumed"]
        }
      }
    },
    
    "coordination_results": {
      "type": "object",
      "patternProperties": {
        "^[a-z_]+$": {
          "type": "object",
          "properties": {
            "success": {"type": "boolean"},
            "ttl_consumed": {"type": "integer"},
            "ttl_compliant": {"type": "boolean"},
            "node_type": {"type": "string"},
            "output_data": {"type": "object"},
            "error": {"type": ["string", "null"]}
          },
          "required": ["success", "ttl_compliant", "node_type"]
        }
      }
    },
    
    "project_generation": {
      "type": "object", 
      "properties": {
        "project_name": {"type": "string"},
        "project_path": {"type": "string"},
        "files_generated": {"type": "integer", "minimum": 0},
        "generation_success": {"type": "boolean"},
        "file_types": {
          "type": "object",
          "patternProperties": {
            "^\\.[a-z]+$": {"type": "integer"}
          }
        }
      },
      "required": ["project_name", "generation_success", "files_generated"]
    },
    
    "swarm_intelligence_metrics": {
      "type": "object",
      "properties": {
        "swarm_intelligence_quotient": {"type": "integer", "minimum": 0},
        "emergence_factor": {"type": "number", "minimum": 0, "maximum": 1},
        "coordination_efficiency": {"type": "number", "minimum": 0, "maximum": 1},
        "hyper_intelligence_achieved": {"type": "boolean"},
        "emergent_behaviors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "description": {"type": "string"}, 
              "emergence_level": {"type": "number", "minimum": 0, "maximum": 1}
            },
            "required": ["name", "description", "emergence_level"]
          }
        }
      },
      "required": ["swarm_intelligence_quotient", "emergence_factor"]
    },
    
    "ttl_compliance": {
      "type": "object",
      "properties": {
        "global_ttl_compliance": {"type": "boolean"},
        "total_budget": {"type": "integer", "minimum": 0},
        "total_consumed": {"type": "integer", "minimum": 0},
        "efficiency_ratio": {"type": "number", "minimum": 0, "maximum": 1},
        "execution_time_seconds": {"type": "number", "minimum": 0},
        "node_compliance": {
          "type": "object",
          "patternProperties": {
            "^[a-z_]+$": {"type": "boolean"}
          }
        }
      },
      "required": ["global_ttl_compliance", "total_budget", "total_consumed"]
    },
    
    "adversarial_hardening": {
      "type": "object",
      "properties": {
        "compilation_bypass_active": {"type": "boolean"},
        "process_coordination_used": {"type": "boolean"},
        "graceful_error_handling": {"type": "boolean"},
        "partial_failure_resilience": {"type": "boolean"},
        "security_validations_passed": {"type": "boolean"}
      },
      "required": ["compilation_bypass_active", "process_coordination_used"]
    },
    
    "ash_reactor_integration": {
      "type": "object",
      "properties": {
        "orchestrated_by_ash_reactor": {"type": "boolean"},
        "compliance_with_requirement": {"type": "string"},
        "reactor_steps_completed": {"type": "integer", "minimum": 0},
        "reactor_execution_time_ms": {"type": "integer", "minimum": 0}
      },
      "required": ["orchestrated_by_ash_reactor", "compliance_with_requirement"]
    }
  },
  
  "required": [
    "swarm_coordination_metadata",
    "ontology_intelligence", 
    "swarm_nodes",
    "coordination_results",
    "project_generation",
    "swarm_intelligence_metrics",
    "ttl_compliance",
    "adversarial_hardening",
    "ash_reactor_integration"
  ],
  
  "additionalProperties": false
}